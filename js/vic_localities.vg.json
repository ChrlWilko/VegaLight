{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 450,
    "height": 450,
    "title": "Average Property Prices by Suburb",
    "projection": {
      "type": "mercator"
    },
    "layer": [
      {
        "data": {
          "url": "https://raw.githubusercontent.com/ChrlWilko/VegaLight/main/js/vic_localities.topojson",
          "format": {
            "type": "topojson",
            "feature": "vic_localities"
          }
        },
        "mark": {
          "type": "geoshape",
          "fill": "lightgray",
          "stroke": "white"
        }
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/ChrlWilko/VegaLight/main/melbourne_housing_refined.csv",
          "format": {
            "type": "csv"
          }
        },
        "transform": [
          {"filter": {"field": "Price", "valid": true}},
          {"aggregate": [
            {"op": "mean", "field": "Lattitude", "as": "average_latitude"},
            {"op": "mean", "field": "Longtitude", "as": "average_longitude"},
            {"op": "mean", "field": "Price", "as": "Average Price"}
          ], "groupby": ["Suburb"]}
        ],
        "mark": {
          "type": "circle",
          "filled": true,
          "size": 50
        },
        "encoding": {
          "latitude": {"field": "average_latitude", "type": "quantitative"},
          "longitude": {"field": "average_longitude", "type": "quantitative"},
          "color": {"field": "Average Price", "type": "quantitative", "scale": {"scheme": "viridis", "domain":[0,2500000]}},
          "tooltip": [
            {"field": "Suburb", "type": "nominal", "title": "Suburb"},
            {"field": "Average Price", "type": "quantitative", "title": "Average Price", "format": "$,.2f"}
          ]
        }
      }
    ]
  }
  
